<template>
  <section class="bg-white rounded-lg shadow-md overflow-hidden">
    <div class="bg-gradient-to-r from-slate-600 to-slate-700 text-white p-4">
      <h2 class="text-xl font-bold flex items-center">ğŸ¤ æœ€æ–°ã®æ­Œã£ã¦ã¿ãŸ</h2>
    </div>

    <div v-if="video" class="p-4">
      <!-- YouTubeåŸ‹ã‚è¾¼ã¿ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ -->
      <div class="relative">
        <iframe
          v-if="getYouTubeEmbedUrl(video)"
          :src="getYouTubeEmbedUrl(video)"
          class="w-full aspect-video rounded-lg"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
          title="YouTube video player"
        ></iframe>
        <div
          v-else
          class="w-full aspect-video bg-gray-200 rounded-lg flex items-center justify-center"
        >
          <p class="text-gray-500">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸ</p>
        </div>
      </div>

      <!-- å‹•ç”»æƒ…å ±ã¨ãƒªãƒ³ã‚¯ -->
      <div class="mt-4 space-y-2">
        <h3
          class="font-semibold text-gray-800 line-clamp-2 hover:text-purple-600 transition-colors"
        >
          {{ video?.title || "" }}
        </h3>
        <p class="text-sm text-gray-500">
          {{ video?.published_at ? formatDate(video.published_at) : "" }}
        </p>
      </div>
    </div>

    <div v-else class="p-4 text-center text-gray-500">
      <p>æ­Œã£ã¦ã¿ãŸå‹•ç”»ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>
    </div>
  </section>
</template>

<script setup lang="ts">
  import type { Video } from "~/types/video";
  import { getYouTubeEmbedUrl, formatDate } from "~/utils/video";

  interface Props {
    video: Video | null;
  }

  defineProps<Props>();
</script>
